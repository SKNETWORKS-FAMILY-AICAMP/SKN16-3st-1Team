# ğŸ“ LLM ê°•ì˜ ê²€ìƒ‰ & Help RAG Agent

LLM ê´€ë ¨ ê°•ì˜ ìë£Œ(Jupyter ë…¸íŠ¸ë¶, PDF)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ RAG(Retrieval-Augmented Generation) ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

---

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

- **ëª©ì **: LLM ê°•ì˜ ìë£Œë¥¼ ì„ë² ë”©í•˜ì—¬ ì‚¬ìš©ì ì§ˆì˜ì— ëŒ€í•œ ë‹µë³€ ì œê³µ
- **ë°ì´í„°**: `educational_materials/` ë””ë ‰í† ë¦¬ì˜ `.ipynb` ë° `.pdf` íŒŒì¼
- **ê¸°ëŠ¥**: ì½”ë“œ ê²€ìƒ‰, ê°•ì˜ ìš”ì•½, ì§ˆì˜ì‘ë‹µ, ì½”ë“œ ì„¤ëª…  
  - ğŸ†• **ì£¼ì°¨ ìš”ì•½**: `ê°•ì˜ ìš”ì•½: 6ì›” 3ì£¼ì°¨` ê°™ì€ **ìì—°ì–´ ì£¼ì°¨ ì…ë ¥** ì§€ì›  
  - ğŸ†• **íšŒê³ ë¡ ìƒì„±**: `íšŒê³ ë¡: 7ì›” 3ì£¼ì°¨`, `íšŒê³ ë¡: 2025-07-21` ë“± **ë¸”ë¡œê·¸ ìŠ¤íƒ€ì¼ íšŒê³ **  
  - ğŸ†• **ì˜ë„ ì¸ì‹ ì½”ë“œ ê²€ìƒ‰**: `CNN`, `RAG`, `LangChain`, `Retriever` ê°™ì€ **í‚¤ì›Œë“œë§Œ**ìœ¼ë¡œë„ ê´€ë ¨ ì½”ë“œ/ì„¤ëª… ìš°ì„  ê²€ìƒ‰  
  - ğŸ†• **ì—”SEMBLE/Fallback**: BM25+ë²¡í„° ê²°í•©(ê°€ëŠ¥ ì‹œ) â†’ ë²„ì „ í˜¸í™˜ ì•ˆ ë˜ë©´ **ë²¡í„° ê²€ìƒ‰ë§Œ ìë™ ì‚¬ìš©**

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

- **Python 3.10+**
- **LangChain** (RAG íŒŒì´í”„ë¼ì¸/LLM)
- **Chroma DB** (ë²¡í„° DB)
- **Gradio** (ì›¹ UI)
- **HuggingFace ì„ë² ë”©**: `google/embeddinggemma-300m`
- **OpenAI LLM**: `gpt-4o-mini`
- **PyMuPDF** (PDF ì²˜ë¦¬)
- ğŸ†• **dateparser** (í•œêµ­ì–´ ìì—°ì–´ ë‚ ì§œ/ì£¼ì°¨ íŒŒì‹±)

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°



```
3rd_project2/
â”œâ”€â”€ educational_materials/ # ê°•ì˜ ìë£Œ ë””ë ‰í† ë¦¬
â”‚ â”œâ”€â”€ notebooks/ # Jupyter ë…¸íŠ¸ë¶ íŒŒì¼ë“¤
â”‚ â””â”€â”€ pdfs/ # PDF ê°•ì˜ ìë£Œë“¤
â”œâ”€â”€ src/ # ì†ŒìŠ¤ ì½”ë“œ
â”‚ â”œâ”€â”€ init.py
â”‚ â”œâ”€â”€ vector_db_builder.py # ë²¡í„° DB êµ¬ì¶• ëª¨ë“ˆ
â”‚ â”œâ”€â”€ rag_system.py # RAG ì‹œìŠ¤í…œ ë©”ì¸ í´ë˜ìŠ¤ (ì£¼ì°¨/íšŒê³ ë¡/ì˜ë„ ì¸ì‹ í¬í•¨) â† ğŸ†•
â”‚ â””â”€â”€ gradio_app.py # Gradio ì›¹ ì¸í„°í˜ì´ìŠ¤ (ëª…ë ¹ì–´ ë¼ìš°íŒ…) â† ğŸ†•
â”œâ”€â”€ main.py # ë©”ì¸ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ requirements.txt # Python ì˜ì¡´ì„± (dateparser, pillow í¬í•¨ ê¶Œì¥) â† ğŸ†•
â”œâ”€â”€ PRD.md # í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ
â””â”€â”€ README.md # ì´ íŒŒì¼
```

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pip install -r requirements.txt
```

### 2. OpenAI API í‚¤ ì„¤ì •

```bash
# .env íŒŒì¼ ìƒì„±
cp .env.example .env

# .env íŒŒì¼ì—ì„œ OpenAI API í‚¤ ì„¤ì •
OPENAI_API_KEY=your_actual_api_key_here
```

### 3. ê°•ì˜ ìë£Œ ì¤€ë¹„

`educational_materials/` ë””ë ‰í† ë¦¬ì— ê°•ì˜ ìë£Œë¥¼ ë°°ì¹˜:

```
educational_materials/
â”œâ”€â”€ notebooks/
â”‚   â”œâ”€â”€ 2024-09-16_LangChain_RAG.ipynb
â”‚   â”œâ”€â”€ 2024-09-17_CNN_Tutorial.ipynb
â”‚   â””â”€â”€ ...
â””â”€â”€ pdfs/
    â”œâ”€â”€ 2024-09-16_AI_Lecture.pdf
    â””â”€â”€ ...
```

### 4. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

```bash
python main.py
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:7860`ìœ¼ë¡œ ì ‘ì†

## ğŸ’¬ ì‚¬ìš©ë²•

### ê¸°ë³¸ ì§ˆì˜ì‘ë‹µ
- "RNNê³¼ CNNì˜ ì°¨ì´ì ì€?"
- "ë”¥ëŸ¬ë‹ ëª¨ë¸ í•™ìŠµ ë°©ë²•"
- "ì˜¤ë²„í”¼íŒ… ë°©ì§€ ê¸°ë²•"

### ì½”ë“œ ê²€ìƒ‰
- "ì½”ë“œ ê²€ìƒ‰: CNN ëª¨ë¸"
- "ì½”ë“œ ê²€ìƒ‰: ë°ì´í„° ì „ì²˜ë¦¬"
- ğŸ†• í‚¤ì›Œë“œë§Œ ì…ë ¥í•´ë„ ë¨: CNN, RAG, LangChain, Retriever â€¦

### ê°•ì˜ ìš”ì•½
- "ê°•ì˜ ìš”ì•½: 2024-09-16"
- "ê°•ì˜ ìš”ì•½: 20240916"
- ğŸ†• ê°•ì˜ ìš”ì•½: 6ì›” 3ì£¼ì°¨ (ìì—°ì–´ ì£¼ì°¨ ì¸ì‹)

íšŒê³ ë¡ (ë¸”ë¡œê·¸ ìŠ¤íƒ€ì¼)

ğŸ†• íšŒê³ ë¡: 7ì›” 3ì£¼ì°¨
ğŸ†• íšŒê³ ë¡: 2025-07-21

### ì½”ë“œ ì„¤ëª…
1. ì½”ë“œ ê²€ìƒ‰ìœ¼ë¡œ ì›í•˜ëŠ” ì½”ë“œ ì°¾ê¸°
2. "ì½”ë“œ ì„¤ëª…: [ì„ íƒí•œ ì½”ë“œ]"

## ğŸ”§ ì£¼ìš” ê¸°ëŠ¥

### 1. ë²¡í„° DB êµ¬ì¶• (`vector_db_builder.py`)
- Jupyter ë…¸íŠ¸ë¶ì˜ ì½”ë“œ/ë§ˆí¬ë‹¤ìš´ ì…€ ë¶„ë¦¬ ì²˜ë¦¬
- PDF ë¬¸ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ
- ë©”íƒ€ë°ì´í„° ê¸°ë°˜ ê²€ìƒ‰ ì§€ì›
- íŒŒì¼ëª…ì—ì„œ ê°•ì˜ ë‚ ì§œ ìë™ ì¶”ì¶œ

### 2. RAG ì‹œìŠ¤í…œ (`rag_system.py`)
- ì•™ìƒë¸” ë¦¬íŠ¸ë¦¬ë²„ (ë²¡í„° ê²€ìƒ‰ + BM25)
- ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ë‹µë³€ ìƒì„±
- ì½”ë“œ ìŠ¤ë‹ˆí« ì „ìš© ê²€ìƒ‰
- ê°•ì˜ë³„ ìš”ì•½ (ë‚ ì§œ/ì£¼ì°¨) â† ğŸ†•
- íšŒê³ ë¡ ìƒì„± (ë‚ ì§œ/ì£¼ì°¨) â† ğŸ†•

### 3. Gradio ì¸í„°í˜ì´ìŠ¤ (`gradio_app.py`)
- ì‹¤ì‹œê°„ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
- ë²¡í„° DB êµ¬ì¶• ë²„íŠ¼
- ì½”ë“œ í•˜ì´ë¼ì´íŒ…
- ì‘ë‹µ ì†ŒìŠ¤ í‘œì‹œ

## ğŸ“Š RAG í‰ê°€ ì§€í‘œ

ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ê¸° ìœ„í•œ 4ê°€ì§€ í•µì‹¬ í‰ê°€ ì§€í‘œ:

### 1. **Answer Similarity (ë‹µë³€ ìœ ì‚¬ë„)**
- **ëª©ì **: ìƒì„±ëœ ë‹µë³€ì´ ì •ë‹µê³¼ ì–¼ë§ˆë‚˜ ìœ ì‚¬í•œì§€ ì¸¡ì •
- **ì¸¡ì • ë°©ë²•**: ì„ë² ë”© ë²¡í„° ê°„ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê³„ì‚°
- **ë²”ìœ„**: 0~1 (1ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ìœ ì‚¬)
- **ì˜ë¯¸**: ë‹µë³€ì˜ ì˜ë¯¸ì  ì •í™•ì„± í‰ê°€

### 2. **Answer Relevancy (ë‹µë³€ ê´€ë ¨ì„±)**
- **ëª©ì **: ìƒì„±ëœ ë‹µë³€ì´ ì§ˆë¬¸ê³¼ ì–¼ë§ˆë‚˜ ê´€ë ¨ìˆëŠ”ì§€ ì¸¡ì •
- **ì¸¡ì • ë°©ë²•**: ì§ˆë¬¸ê³¼ ë‹µë³€ ê°„ ì˜ë¯¸ì  ì—°ê´€ì„± ë¶„ì„
- **ë²”ìœ„**: 0~1 (1ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ê´€ë ¨ì„± ë†’ìŒ)
- **ì˜ë¯¸**: ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ì˜ ì ì ˆì„± í‰ê°€

### 3. **Context Precision (ë§¥ë½ ì •ë°€ë„)**
- **ëª©ì **: ê²€ìƒ‰ëœ ë¬¸ì„œë“¤ì´ ì–¼ë§ˆë‚˜ ì •í™•í•˜ê³  ê´€ë ¨ì„±ì´ ë†’ì€ì§€ ì¸¡ì •
- **ì¸¡ì • ë°©ë²•**: ê²€ìƒ‰ëœ ìƒìœ„ ë¬¸ì„œë“¤ì˜ ê´€ë ¨ì„± ë¹„ìœ¨
- **ë²”ìœ„**: 0~1 (1ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ì •ë°€)
- **ì˜ë¯¸**: ê²€ìƒ‰(Retrieval) ë‹¨ê³„ì˜ í’ˆì§ˆ í‰ê°€

### 4. **Faithfulness (ì‹ ë¢°ì„±)**
- **ëª©ì **: ìƒì„±ëœ ë‹µë³€ì´ ê²€ìƒ‰ëœ ë¬¸ì„œ ë‚´ìš©ì— ì–¼ë§ˆë‚˜ ì¶©ì‹¤í•œì§€ ì¸¡ì •
- **ì¸¡ì • ë°©ë²•**: ë‹µë³€ì˜ ê° ë¬¸ì¥ì´ ì œê³µëœ ë§¥ë½ì—ì„œ ì§€ì§€ë˜ëŠ”ì§€ í™•ì¸
- **ë²”ìœ„**: 0~1 (1ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ì‹ ë¢°ì„± ë†’ìŒ)
- **ì˜ë¯¸**: ë‹µë³€ì˜ ì‚¬ì‹¤ì  ì •í™•ì„±ê³¼ í™˜ê°(hallucination) ë°©ì§€

### ğŸ“ˆ í‰ê°€ ì‹¤í–‰ ë°©ë²•
```bash
# RAG ì‹œìŠ¤í…œ í‰ê°€ ì‹¤í–‰
python run_evaluation.py

# ì‹œê°í™” í¬í•¨ í‰ê°€ ê²°ê³¼ í™•ì¸
# ìƒì„±ëœ HTML ëŒ€ì‹œë³´ë“œì—ì„œ ì§€í‘œë³„ ì„±ëŠ¥ ë¶„ì„ ê°€ëŠ¥
```

## âš™ï¸ ì„¤ì •

### ì„ë² ë”© ëª¨ë¸ ë³€ê²½
`src/vector_db_builder.py`ì—ì„œ ëª¨ë¸ ë³€ê²½:

```python
self.embeddings = HuggingFaceEmbeddings(
    model_name="your-embedding-model",
    model_kwargs={'device': 'cpu'},
    encode_kwargs={'normalize_embeddings': True}
)
```

### LLM ëª¨ë¸ ë³€ê²½
`src/rag_system.py`ì—ì„œ ëª¨ë¸ ë³€ê²½:

```python
self.llm = Ollama(model="your-llm-model")
```

## ğŸ› ë¬¸ì œ í•´ê²°

### Chroma DB ì˜¤ë¥˜
```bash
# DB ë””ë ‰í† ë¦¬ ì‚­ì œ í›„ ì¬êµ¬ì¶•
rm -rf chroma_db/
```

### OpenAI API ì˜¤ë¥˜
```bash
# API í‚¤ í™•ì¸
echo $OPENAI_API_KEY

# .env íŒŒì¼ í™•ì¸
cat .env
```


## ğŸš§ í–¥í›„ ê°œì„ ì‚¬í•­

- [ ] í•œêµ­ì–´ ë¦¬ë­í‚¹ ëª¨ë¸ í†µí•© -> "name": "dragonkue/bge-reranker-v2-m3-ko"
- [ ] ì½”ë“œ ì‹¤í–‰ ê¸°ëŠ¥
- [ ] ì‹œê°í™” ê²°ê³¼ í‘œì‹œ
- [ ] ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ
- [ ] ê²€ìƒ‰ ê²°ê³¼ í•„í„°ë§